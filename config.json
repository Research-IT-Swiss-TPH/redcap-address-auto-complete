{
    "name": "Address Auto Complete",

    "namespace": "STPH\\addressAutoComplete", 

    "description": "<b>Please note that currently supported countries are: Switzerland.</b><br>Easily create Auto-Complete Address fields that fetch results from APIs. Additionally, save geo data in custom variables and adjust the format of the address label.",

    "documentation": "README.md",

    "authors": [
        {
             "name": "Ekin Tertemiz",
             "email": "ekin.tertemiz@swisstph.ch",
             "institution": "Swiss Tropical And Public Health Institute (STPH)"
         }
     ],

    "framework-version": 6,

    "permissions": [
        "redcap_every_page_top",
        "redcap_survey_page_top",
        "redcap_module_configuration_settings"
    ],

    "enable-every-page-hooks-on-system-pages": false,

    "links":{},

    "no-auth-pages": [],

    "system-settings": [],

    "project-settings": [
        {
            "key": "api-source",
            "type": "dropdown",
            "name": "<b>API Source</b>",
            "choices": [
                {
                    "name": "geo.admin.ch",
                    "value": "geo.admin.ch"
                },
                {
                    "name": "your.api.here",
                    "value": "your.api.here"
                }
            ],
            "required": true
        },
        {
            "key": "api-description",
            "type": "descriptive",
            "name": "",
            "branchingLogic": {
                "field": "api-source",
                "op": "<>",
                "value": ""
            }

        },
        {
            "key": "api-limit",
            "type": "text",
            "name": "API Response Limit<br><small>Defines how may results are returned per search request. This can significantly affect performance. Default and maximum are set to <code>20</code>.</small>",
            "branchingLogic": {
                "field": "api-source",
                "op": "<>",
                "value": ""
            }
        },
        {
            "key": "api-key",
            "type": "text",
            "name": "API Key<br><small>An API key can be used to have higher priviliges, such as performing more requests per time. In general API keys are obtained by application.</small>",
            "branchingLogic": {
                "field": "api-source",
                "op": "<>",
                "value": ""
            }
        },        
        {
            "key": "enable-for-data-entry",
            "type": "checkbox",
            "name": "Enable for Data Entry",
            "branchingLogic": {
                "field": "api-source",
                "op": "<>",
                "value": ""
            }
        },
        {
            "key": "enable-for-survey",
            "type": "checkbox",
            "name": "Enable for Survey",
            "branchingLogic": {
                "field": "api-source",
                "op": "<>",
                "value": ""
            }
        },        
        {
            "key": "target-field",
            "type": "field-list",
            "name": "<b>Target Field</b><br>Select target field to be transformed into Address Auto-Complete",
            "required": true,
            "branchingLogic": {
                "field": "api-source",
                "op": "<>",
                "value": ""
            }
        },
        {
            "key": "target-meta",
            "type": "field-list",
            "name": "Target Meta<br>Select meta field where additional geo information should be saved",
            "branchingLogic": {
               "conditions": [
                   {
                    "field": "api-source",
                    "op": "<>",
                    "value": ""
                   },
                   {
                    "field": "target-field",
                    "op": "<>",
                    "value": ""
                   }
               ]
            }
        },
        {
            "key": "output-format",
            "type": "string",
            "name": "Custom output format<br>Use <i>%PLACEHOLDER%</i> to refer to address parts.<br><i>Default: <code>%STREET% %NO%, %CODE% %PLACE%</code></i>",
            "branchingLogic": {
                "conditions": [
                    {
                     "field": "api-source",
                     "op": "<>",
                     "value": ""
                    },
                    {
                     "field": "target-field",
                     "op": "<>",
                     "value": ""
                    }
                ]
            }
        },
        {
            "key": "javascript-debug",
            "type": "checkbox",
            "name": "Enable Javascript Debug"
        }
    ],

    "crons": [],

    "compatibility": {
        "php-version-min": "7.0.0",
        "redcap-version-min": "10.0.0"
    }
 }